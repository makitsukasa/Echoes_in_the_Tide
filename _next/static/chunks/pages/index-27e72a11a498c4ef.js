(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3332],{15772:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(37876),n=s(49380),l=s(94529),c=s(14232),r=s(8047),i=s(73845),o=s(59688),d=s(8494),m=s(60573),u=s(88630);let h=()=>{let e={address:m.L,abi:m.M},{writeContract:t,isPending:s,error:a}=(0,d.x)({mutation:{onSuccess:()=>{o.oR.success("小瓶を拾いました！")},onError:e=>{o.oR.error("小瓶を拾うのに失敗しました"),console.error(e)}}});return{claimBottle:(0,c.useCallback)(s=>{(0,u.$)(t,e,s)},[t]),isLoading:s,error:a}},x=()=>{let{bottles:e,isLoading:t,error:s,fetchBottles:a}=(0,i.$)(),[n,l]=(0,c.useState)(null),{claimBottle:o,isLoading:d}=h(),{address:m}=(0,r.F)();(0,c.useEffect)(()=>{a(m)},[a,m]);let u=async e=>{try{await o(e.id),l(null),a(m)}catch(e){}};return{bottles:e,isLoading:t,error:s,selectedBottle:n,setSelectedBottle:l,handleClaim:u,isClaiming:d}};function b(){let{bottles:e,isLoading:t,error:s,selectedBottle:c,setSelectedBottle:r,handleClaim:i}=x(),o="/Echoes_in_the_Tide";return s?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("main",{className:"flex items-center justify-center h-[calc(100vh-4rem)]",children:(0,a.jsxs)("p",{className:"text-red-500",children:["エラーが発生しました: ",s.message]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)(n.A,{}),(0,a.jsxs)("main",{className:"relative h-[calc(100vh-4rem)] overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url(".concat(o,"/ocean.webp)")}}),(0,a.jsx)("div",{className:"absolute bottom-10 left-0 right-0 flex justify-center space-x-12",children:t?(0,a.jsx)("p",{className:"text-white",children:"読み込み中..."}):e.map((e,t)=>(0,a.jsx)("div",{onClick:()=>r(e),style:{transform:"rotate(".concat(15*t-15,"deg)")},className:"cursor-pointer transform hover:scale-110 transition-transform",children:(0,a.jsx)("img",{src:"".concat(o,"/bottle.webp"),alt:"小瓶",className:"w-32 h-32 object-contain drop-shadow-lg"})},e.id))}),c&&(0,a.jsx)(l.A,{bottle:{...c,tokenId:c.id,tokenURI:c.tokenURI||"",image:c.image||"".concat(o,"/bottle.webp"),status:"漂流中",timestamp:new Date().toLocaleString("ja-JP"),date:c.date||new Date().toLocaleDateString("ja-JP")},onClose:()=>r(null),showClaimButton:!0,onClaim:i})]})]})}},16760:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(15772)}])},94529:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(37876);function n(e){let{bottle:t,onClose:s,showClaimButton:n=!1,onClaim:l}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-[2px] flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&s()},children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"小瓶の中身"}),(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:t.description}),t.image?(0,a.jsx)("img",{src:t.image,alt:"小瓶の中身",className:"w-full h-48 object-contain rounded-lg"}):(0,a.jsx)("img",{src:"".concat("/Echoes_in_the_Tide","/bottle.webp"),alt:"小瓶の中身",className:"w-full h-48 object-contain rounded-lg"}),(0,a.jsx)("div",{className:"mt-4 flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[t.timestamp&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:t.timestamp}),n&&(0,a.jsx)("button",{onClick:()=>l&&l(t),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200",children:"小瓶を拾う"}),(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200",children:"閉じる"})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9237,8007,636,6593,8792],()=>t(16760)),_N_E=e.O()}]);