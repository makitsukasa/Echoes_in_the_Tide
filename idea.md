## 🌊 概要

「波打ち際の小瓶」は、誰かの思いが詰まったメッセージや写真を“海に流す”ように送り出し、また偶然“流れ着いた”誰かの小瓶を拾うことで、静かなつながりを体験できるWeb3ベースの放置型ゲームです。

## 💡 開発意図

- Web3の価値を自然に体験できる「入口」を作る
- サーバを持たず、**運営不在でも続く**美しいシステムを実現する
- 「誰ともつながらない、しかしつながっている」という**匿名SNS的なぬくもり**を表現

## 🧭 体験してほしい価値

- 審査も検閲も存在しない、**完全な自由**
- 自らの行動に責任を持つ、**自律した体験**
- **永久に消えない**記録と、それを託すという行為の感触

## 🎯ターゲット層

- 癒しやロマンを求める**放置ゲーマー**
- 匿名掲示板や、**ゆるいつながりのSNS**が好きな人
- Web3に興味はあるが、取引や投機には抵抗がある人

## 🎮 ゲーム内容

プレイヤーの行動は、シンプルに設計されています。

| 操作 | 内容 | オンチェーン操作 | ゲーム外で要求する操作 |
| --- | --- | --- | --- |
| 1. 海を眺める | ランダムに流れ着いた誰かの小瓶を見る | ❌ なし
the graphでデータ取得 |  |
| 2. 小瓶を拾う | 気になる小瓶を自分のものにする | ✅ `claim()` | metamaskを接続しガス代の支払いが必要 |
| 3. 小瓶を流す | メッセージ(+写真)を海に流す | ✅ `mint()`  | metamaskを接続しガス代の支払いが必要
画像添付にはfilebaseも必要 |
| 4.拾った小瓶を眺める | 自分のものにした小瓶を一覧表示 | ❌ なし
the graphでデータ取得 |  |

## 🧱 技術構成

### ◾ システム構成

- **完全オンチェーン**かつ**中央にWeb2サーバ不在**
- ユーザーが自らガス代を支払って操作
- 画像・メタデータは IPFS（filebase）へ保存

### ◾ スマートコントラクト

- `Bottle.sol`（ERC721）
    - NFTのMint/Transferと所有管理
- `Ocean.sol`
    - 海にある(流されて拾われていない)小瓶を管理
    - `mint`で小瓶を追加
        - `mint`直後のOwnerは海でありsenderではない
        - senderは別の変数に保存しておき、sender本人の海には流れてこないように
    - `claim`でOwnerを自分に書き換え
        - Ownerが海であるbottleのみが流れてくる
        - 念の為`claim`時にOwnerが海かどうかのチェックはしている

### ◾ データインデックス

- The Graph によりオンチェーンデータを検索
    - 「今、海にあるNFT一覧」などを取得
    - `mint`や`claim`のイベントを反映

### ◾ フロントエンド

- GitHub Pages 上に**シンプルなUIを提供**
- 眺めるだけならアカウント不要、`mint`や`claim`時にのみMetaMask接続を促す設計
- ユーザ負荷を減らすべく、テキストだけの小瓶はIPFSなしで流せる(オンチェーンにデータを保存)。画像を流すには、ユーザにfilebaseのアカウントとAPIキーを用意してもらい、フロントからAPIを叩いてfilebaseに保存。

---

## 💭 妥協した点

- mint直後のOwnerが自分ではない点、所有権のclaimができる点がweb3的でなく、珍しい
    - 普通はガス代を払って発行したNFTの所有権は本人になるし、所有権は渡してもらうしかできない。Web3の入門を銘打っているのに変化球。
    - 小瓶を海に流す世界観を優先
    - 実装次第という意味ではむしろweb3的かも
- `mint`や`claim`にはmetamaskが必要となり、面倒
    - 「最初のWeb3体験」としては最低限超えるべきハードルといえる
- 画像のアップロードには自前でfilebaseのAPIキーを用意してもらう必要があり、面倒
    - 「最初のWeb3体験」としては不要なハードルだがやむなし
